<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="If a transaction digest shows up in this list, when executing such transaction, we will always return `ExecutionError::CertificateDenied` without executing it (but still do gas smashing). Because this list is not gated by protocol version, there are a few important criteria for adding a digest to this list:"><title>get_denied_certificates in sui_types::execution - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-46f98efaafac5295.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-9ee3a5e31a2afa3e.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="sui_types" data-themes="" data-resource-suffix="" data-rustdoc-version="1.75.0 (82e1608df 2023-12-21)" data-channel="1.75.0" data-search-js="search-8fbf244ebcf71464.js" data-settings-js="settings-74424d7eec62a23e.js" ><script src="../../static.files/storage-fec3eaa3851e447d.js"></script><script defer src="sidebar-items.js"></script><script defer src="../../static.files/main-9dd44ab47b99a0fb.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-5d8b3c7633ad77ba.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../sui_types/index.html">sui_types</a><span class="version">0.1.0</span></h2></div><div class="sidebar-elems"><h2><a href="index.html">In sui_types::execution</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-7b819b6101059cd0.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1>Function <a href="../index.html">sui_types</a>::<wbr><a href="index.html">execution</a>::<wbr><a class="fn" href="#">get_denied_certificates</a><button id="copy-path" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="src" href="../../src/sui_types/execution.rs.html#477-480">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><pre class="rust item-decl"><code>pub fn get_denied_certificates() -&gt; &amp;'static <a class="struct" href="https://doc.rust-lang.org/1.75.0/std/collections/hash/set/struct.HashSet.html" title="struct std::collections::hash::set::HashSet">HashSet</a>&lt;<a class="struct" href="../digests/struct.TransactionDigest.html" title="struct sui_types::digests::TransactionDigest">TransactionDigest</a>&gt;</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>If a transaction digest shows up in this list, when executing such transaction,
we will always return <code>ExecutionError::CertificateDenied</code> without executing it (but still do
gas smashing). Because this list is not gated by protocol version, there are a few important
criteria for adding a digest to this list:</p>
<ol>
<li>The certificate must be causing all validators to either panic or hang forever deterministically.</li>
<li>If we ever ship a fix to make it no longer panic or hang when executing such transaction,
we must make sure the transaction is already in this list. Otherwise nodes running the newer version
without these transactions in the list will generate forked result.
Below is a scenario of when we need to use this list:</li>
<li>We detect that a specific transaction is causing all validators to either panic or hang forever deterministically.</li>
<li>We push a CertificateDenyConfig to deny such transaction to all validators asap.</li>
<li>To make sure that all fullnodes are able to sync to the latest version, we need to add the transaction digest
to this list as well asap, and ship this binary to all fullnodes, so that they can sync past this transaction.</li>
<li>We then can start fixing the issue, and ship the fix to all nodes.</li>
<li>Unfortunately, we can’t remove the transaction digest from this list, because if we do so, any future
node that sync from genesis will fork on this transaction. We may be able to remove it once
we have stable snapshots and the binary has a minimum supported protocol version past the epoch.</li>
</ol>
</div></details></section></div></main></body></html>